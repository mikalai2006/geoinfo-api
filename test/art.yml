config:
  target: 'http://localhost:8000'
  phases:
    - duration: 60
      arrivalRate: 50
scenarios:
  - flow:
    - post:
        url: "/api/v1/gql/query"
        json:
          query: |
            query findNodeInfo($lat: Float, $lon: Float){
                node(lat: $lat, lon: $lon) {
                    id
                    osmId
                    type
                    lat
                    lon
                    name
                    userId
                    user {
                        id
                        lang
                        name
                        login
                        lastTime
                        online
                        images {
                            id
                            service
                            serviceId
                            title
                            userId
                            path
                            dir
                            ext
                        }
                    }
                    images {
                        id
                        service
                        serviceId
                        title
                        userId
                        path
                        dir
                        ext
                        createdAt
                        user {
                            id
                            lang
                            name
                            login
                            lastTime
                            online
                            images {
                                id
                                service
                                serviceId
                                title
                                userId
                                path
                                dir
                                ext
                            }
                        }
                    }
                    props
                    data{
                        id
                        nodeId
                        tagId
                        tagoptId
                        value
                        title
                        description
                        audit {
                            id
                            nodedataId
                            value
                            props
                            user {
                                id
                                lang
                                name
                                login
                                lastTime
                                online
                                images {
                                    id
                                    service
                                    serviceId
                                    title
                                    userId
                                    path
                                    dir
                                    ext
                                }
                            }
                        }
                        user {
                            id
                            lang
                            name
                            login
                            lastTime
                            online
                            images {
                                id
                                service
                                serviceId
                                title
                                userId
                                path
                                dir
                                ext
                            }
                        }
                        tag {
                            id
                            key
                            title
                            description
                            options {
                                id
                            }
                        }
                        tagopt {
                            id
                            title
                            description
                            value
                        }
                        createdAt
                    }
                    reviewsInfo {
                        count
                        value
                        ratings
                    }
                    address {
                        id
                        userId
                        osmId
                        dAddress
                        address
                        props
                    }
                    createdAt
                }
            }
          variables:
            lat: 51.3485788
            lon: -1.3412568